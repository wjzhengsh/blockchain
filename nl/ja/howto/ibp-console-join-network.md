---

copyright:
  years: 2019

lastupdated: "2019-03-05"

subcollection: blockchain

---

{:new_window: target="_blank"}
{:shortdesc: .shortdesc}
{:screen: .screen}
{:codeblock: .codeblock}
{:note: .note}
{:important: .important}
{:tip: .tip}
{:pre: .pre}

# ネットワーク参加のチュートリアル
{: #ibp-console-join-network}

{{site.data.keyword.blockchainfull}} Platform は、ブロックチェーンのアプリケーションとネットワークを開発、デプロイ、および操作することを可能にする、サービスとしてのブロックチェーン・オファリングです。 ブロックチェーンの各コンポーネントの概要およびコンポーネント同士の連携について詳しくは、[ブロックチェーン・コンポーネントの概要](/docs/services/blockchain/blockchain_component_overview.html#blockchain-component-overview)を参照してください。 このチュートリアルは、[サンプル・ネットワーク・チュートリアル・シリーズ](/docs/services/blockchain/howto/ibp-console-build-network.html#ibp-console-build-network-sample-tutorial)の第 2 部であり、{{site.data.keyword.blockchainfull_notm}} Platform コンソールでノードを作成して、これらを別のクラスターでホストされているブロックチェーン共同事業体に接続する方法について説明しています。
{:shortdesc}


**対象者:** このトピックは、ブロックチェーン・ネットワークの作成、モニター、管理を担当するネットワーク・オペレーターを対象に設計されています。  

{{site.data.keyword.cloud_notm}} Kubernetes Service を使用してコンソールを Kubernetes クラスターにまだデプロイしていない場合は、[{{site.data.keyword.blockchainfull_notm}} Platform 2.0 の概説](/docs/services/blockchain/howto/ibp-v2-deploy-iks.html#ibp-v2-deploy-iks)を参照してください。 コンソール・デプロイメント用に新しい Kubernetes クラスターを作成することも、{{site.data.keyword.cloud_notm}} アカウント内の既存の Kubernetes クラスターを使用することもできます。 {{site.data.keyword.blockchainfull_notm}} Platform を Kubernetes クラスターにデプロイした後は、コンソールを起動してブロックチェーン・コンポーネントを作成および管理できます。

有料版または無料版のどちらの Kubernetes クラスターにデプロイしたかにかかわらず、ノードをデプロイしてチャネルを作成するときには、Kubernetes ダッシュボードで、使用可能なリソースを慎重に確認してください。 Kubernetes クラスターを管理し、必要に応じて追加のリソースをデプロイする責任はユーザーにあります。 無料版のクラスターにもコンポーネントは正常にデプロイできますが、追加するコンポーネントが多くなるほど、コンポーネントの実行速度は遅くなります。
{: note}

## サンプル・ネットワークのチュートリアル・シリーズ
{: #ibp-console-join-network-structure}

この 3 部構成のチュートリアル・シリーズでは、{{site.data.keyword.blockchainfull_notm}} Platform 2.0 コンソールを使用し Kubernetes クラスターへのネットワークのデプロイやスマート・コントラクトのインストールとインスタンス化を行うことで、比較的にシンプルなマルチノードの Hyperledger Fabric ネットワークを作成して相互接続するプロセスを体験していきます。

* [ネットワーク構築チュートリアル](/docs/services/blockchain/howto/ibp-console-build-network.html#ibp-console-build-network)では、順序付けプログラムとピアを作成することで、ネットワークをホストするプロセスを学習します。
* **ネットワーク参加チュートリアル** (このチュートリアル) では、ピアを作成してチャネルに参加させることで、既存のネットワークに参加するプロセスを学習します。
* [ネットワークにスマート・コントラクトをデプロイする](/docs/services/blockchain/howto/ibp-console-smart-contracts.html#ibp-console-smart-contracts)では、スマート・コントラクトを作成してネットワークにデプロイする方法を学習します。

これらのチュートリアルの手順を使用すれば、複数の組織が参加する開発テスト用のネットワークを 1 つのクラスター内に構築できます。 順序付けサービス・ノードを作成して組織を追加することで、
ブロックチェーン・コンソーシアムを形成する場合は、**ネットワーク構築**のチュートリアルを使用してください。ピアをネットワークに接続するには、**ネットワーク参加**のチュートリアルを使用してください。 さまざまなコンソーシアム・メンバーと一緒にこれらのチュートリアルを進めると、実際に**分散した**ブロックチェーン・ネットワークを作成できます。  


このチュートリアルの目的は、**既存の**ネットワークにピアを参加させる方法を示すことです。 このチュートリアルでは、ネットワークをホストする順序付けプログラムが、ご使用のクラスター上または別の {{site.data.keyword.blockchainfull_notm}} Platform クラスター上に既に存在しているものと想定しています。 参加先となる既存のネットワークがない場合は、[ネットワーク構築チュートリアル](/docs/services/blockchain/howto/ibp-console-build-network.html#ibp-console-build-network)のチュートリアルを参照してネットワークの作成方法を確認してください。**ネットワーク参加**のチュートリアルでは、以下の図で青い四角枠で強調表示している `Org2` ブロックチェーン・コンポーネントを作成するステップを説明します。
![ネットワーク参加の構造](../images/ib2-join-network.png "ネットワーク参加の構造")  
*図 1. ネットワーク参加の構造*  
**ネットワーク参加**のチュートリアルのステップを実行して、以下のコンポーネントを作成し、以下のアクションを実行してください。

* **1 つのピア組織** `Org2`  
  組織 `Org2` を定義する Org2 メンバーシップ・サービス・プロバイダー (MSP) 定義を作成します。
* **1 つのピア** `Peer Org2`   
  上の図のブロックチェーン台帳 `Ledger x` は分散ピアによって保守されています。 ピアは [Couch DB ![外部リンク・アイコン](../images/external_link.svg "外部リンク・アイコン")](https://hyperledger-fabric.readthedocs.io/en/release-1.4/couchdb_as_state_database.html) をデータベースとして使用してデプロイされます。
* **1 つの認証局 (CA)** `Org2 CA`
  CA は、すべての組織メンバーに証明書を発行するノードです。 ピア組織 `Org2` 用に 1 つの CA を作成します。
* **単一チャネルへの参加**
  このチュートリアルでは、[ネットワーク構築チュートリアル](/docs/services/blockchain/howto/ibp-console-build-network.html#ibp-console-build-network)のチュートリアルで作成したチャネルに参加する方法を説明しています。

このチュートリアルでは、全体を通して、コンソールのフィールドの**推奨値**をいくつか記載しています。 推奨値を使用すれば、タブやドロップダウン・リストで名前や ID を見つけやすくなります。 これらの値は必須ではありませんが、使用すると便利です。 各タスクの後に推奨値の表を示します。
{:tip}

## ステップ 1: 追加の組織とブロックチェーンへのエントリー・ポイントを作成する
{: #ibp-console-join-network-create-ca-org2}

コンソールを使用して作成する組織ごとに、少なくとも 1 つの CA をデプロイする必要があります。 CA とは、すべてのネットワーク参加者 (ピア、順序付けプログラム、クライアント、その他) に証明書を発行するノードです。 ネットワーク参加者は、公開鍵と秘密鍵のペアが含まれたこれらの証明書を使用して通信および認証することができ、最終的にトランザクションを実行できます。 これらの CA により、組織に属するすべての ID および証明書を作成し、さらに組織そのものを定義します。 その後、それらの ID を使用して、ノードのデプロイ、ネットワークの運用、ブロックチェーンへのトランザクションの送信を行えます。 CA および作成する必要がある ID について詳しくは、[ID の管理](/docs/services/blockchain/howto/ibp-console-identities.html#ibp-console-identities)を参照してください。

このチュートリアルでは、1 つの組織を作成して、**1 つの CA** を作成します。

### ピア組織の CA の作成
{: #ibp-console-join-network-create-CA-org2CA}

このチュートリアルでは、ユーザーおよびノードの公開鍵と秘密鍵が CA によって発行されます。 それらの ID を、{{site.data.keyword.IBM_notm}} は管理しません。それらの鍵は Kubernetes クラスターにもコンソールにも保管されません。 これらはブラウザーのローカル・ストレージのみに保管されます。 そのため、ID および組織 MSP を必ずエクスポートしてください。 別のマシンや別のブラウザーからコンソールにアクセスする場合は、それらの ID および組織の定義をインポートする必要があります。  
{:important}

コンソールから以下の手順を実行します。  

1. 左側の**「ノード」**タブにナビゲートし、**「認証局の追加 (Add Certificate Authority)」**をクリックします。 4 つのステップからなるサイド・パネルを使用して、作成する CA をカスタマイズできるとともに、この CA によって鍵が発行される対象となる組織をカスタマイズできます。
2. **「認証局の作成 (Create Certificate Authority)」**の下の**「{{site.data.keyword.cloud_notm}}」**をクリックします。
3. 2 つ目のサイド・パネルを使用して、CA に**表示名**を付けます。 この CA の推奨値は `Org2 CA` です。
4. 次のパネルで、CA 管理者に資格情報を割り当てます。このためには、**「管理者 ID (Admin ID)」**として `admin` を指定して、希望する任意の秘密を付与します (ただし、このチュートリアルの推奨値は `adminpw`)。
5. **「次へ」**をクリックして、**「認証局の追加 (Add certificate authority)**」をクリックします。

**タスク: ピア組織の CA の作成**

  | **フィールド** | **表示名** | **登録 ID** | **機密事項** |
  | ------------------------- |-----------|-----------|-----------|
  | **認証局の作成 (Create CA)** | Org2 CA  | admin | adminpw |

*図 2. ピア組織の CA の作成*  
CA をデプロイした後に、組織 MSP の作成時やユーザーの登録時にその CA を使用するとともに、ネットワークへのエントリー・ポイント (**ピア**) を作成するためにその CA を使用します。

### CA を使用して ID を登録する
{: #ibp-console-join-network-use-CA-org2}

作成するノードまたはアプリケーションごとに、ブロックチェーン・ネットワークに参加するための公開鍵と秘密鍵が必要です。 これらのノードとアプリケーションをコンソールから管理可能にするために、これらのための管理鍵も作成する必要があります。 CA を使用して以下の 2 つのアイデンティティーを作成します。

* **組織管理者** このアイデンティティーを使用すると、プラットフォーム・コンソールを使用してノードを操作できます。
* **ピア・アイデンティティー** このアイデンティティーを使用すると、ピアをデプロイできます。

これらの証明書を生成するには、以下のステップを実行します。

1. コンソールで、**「ノード」**タブを使用して、作成した `Org2 CA` にナビゲートします。
2. CA を選択した後に、ピア自体のアイデンティティーに加えて、この組織 (`org2`) の管理者を登録する必要があります。 このページには ID が既に表示されています。これは CA のために作成した管理者です。 新規ユーザーを登録するには、**「ユーザーの登録」**ボタンをクリックします。
3. 組織管理者については、`org2admin` という登録 ID を付与します。 任意の機密事項を使用できますが、チュートリアルをわかりやすくするために `org2adminpw` という値を推奨します。 **「次へ」**をクリックします。
4. 次のステップで、この ID の「タイプ」を`クライアント`に設定し、ドロップダウン・リストから任意の所属団体組織を選択します。 「アフィリエーション」フィールドは上級ユーザー向けであり、このチュートリアルでは使用しません。 リストの項目は Fabric CA 内のデフォルトのアフィリエーションです。 Fabric CA によるアフィリエーションの使用方法について詳しくは、[Registering a new identity ![外部リンク・アイコン](../images/external_link.svg "外部リンク・アイコン")](https://hyperledger-fabric-ca.readthedocs.io/en/release-1.4/users-guide.html#registering-a-new-identity) のトピックを参照してください。 ここでは、リストから任意のアフィリエーションを選択して (`org2` など)、**「次へ」**をクリックします。
5. **「最大エンロール回数 (Maximum Enrollments)」**フィールドと**「属性の追加 (Add Attributes)」**フィールドはブランクのままでかまいません。 このチュートリアルでは使用しません。ただし、これらの使用方法については、[ID の登録](/docs/services/blockchain/howto/ibp-console-identities.html#ibp-console-identities-register)のトピックで詳しく説明しています。
6. 組織管理者が登録された後に、ピアのアイデンティティーについてステップ 2 からステップ 5 を繰り返します。ここでは、同じ `Org2 CA` を使用して、`peer2` という登録 ID をピアに割り当てます。 先ほどと同じように、チュートリアルをわかりやすくするために `peer2pw` という機密事項を使用することを推奨します。 これはノード ID なので、次のステップでは**「タイプ」**に`ピア`を選択します。 そして、前と同じく、**「最大エンロール回数 (Maximum Enrollments)」**および**「属性 (Attributes)」**は無視します。

**タスク: ユーザーの登録**

  |  **フィールド** | **説明** | **登録 ID** | **機密事項** |
  | ------------------------- |-----------|-----------|-----------|-----------|
  | **ユーザーの登録** |  Org2 admin | org2admin | org2adminpw |
  | | ピア ID |  peer2 | peer2pw |

*図 3. CA を使用したユーザーの登録*  

### ピア組織 MSP の作成
{: #ibp-console-join-network-create-peers-org2}

ピアの CA を作成して、この CA を使用して組織アイデンティティーを**登録**したので、次にピアの組織の正式な定義を作成する必要があります。これはメンバーシップ・サービス・プロバイダー (MSP) 定義と呼ばれます。 複数のピアが単一の組織に属することができます。 **ピアを作成するたびに新しい組織を作成する必要はありません。** このチュートリアルを実行するのは今回が初めてであるため、この組織の MSP ID を作成します。 MSP の作成プロセスで、`org2admin` アイデンティティーの証明書を生成し、これらの証明書をコンソール・ウォレットに追加します。

1. 左側ナビゲーションの**「組織」**タブにナビゲートし、**「MSP 定義の作成 (Create MSP definition)」**をクリックします。
2. MSP に表示名 (`Org2 MSP` など) と ID (`org2msp` など) を割り当てます。 このフィールドで独自の MSP ID を指定する場合は、ツールチップに表示されるこの名前の制限事項に関する指定内容に従ってください。
3. **「ルート認証局の詳細 (Root Certificate Authority details)」**で、作成したピアの CA を組織のルート CA として指定します。 このチュートリアルを今回初めて実行する場合は、`Org2 CA` という 1 つの CA のみが表示されます。 これを選択します。
4. これの下の**「登録 ID」**フィールドと**「機密事項の登録」**フィールドには、CA を使用して作成した最初のユーザーの登録 ID と機密事項が自動的に入力されます。 それらの値を使用することもできますが、CA 管理者 ID を組織管理者として使用することは推奨されていません。セキュリティー上の理由で、代わりに組織管理者の作成済みの登録 ID と機密事項、`org2admin` と `org2adminpw` を入力することをお勧めします。次に、このアイデンティティーに表示名 (`Org2 Admin` など) を割り当てます。
5. **「生成 (Generate)」**ボタンをクリックして、このアイデンティティーを組織の管理者として登録して、このアイデンティティーをウォレットにエクスポートします。これは、ピアの作成時やチャネルの作成時に使用されます。
6. **「エクスポート」**をクリックして、管理者の証明書をファイル・システムにエクスポートします。 前述のように、この ID はクラスターに保管されることも {{site.data.keyword.IBM_notm}} によって管理されることもありません。 これはブラウザーのローカル・ストレージのみに保管されます。 ブラウザーを変更する場合は、ピアを管理できるようにするために、この ID をコンソール・ウォレットにインポートする必要があります。
7. **「MSP 定義の作成 (Create MSP definition)」**をクリックします。

**タスク: ピア組織 MSP 定義の作成**

  |  | **表示名** | **MSP ID** | **登録 ID**  | **機密事項** |
  | ------------------------- |-----------|-----------|-----------|-----------|
  | **組織の作成** | Org2 MSP | org2msp |||
  | **ルート CA** | Org2 CA ||||
  | **組織管理者の証明書** | |  | org2admin | org2adminpw |
  | **ID** | Org2 Admin |||||

  *図 4. ピア組織 MSP 定義の作成*  

MSP を作成すると、コンソール・ウォレットにピア組織の管理者が表示されます。

**タスク: コンソール・ウォレットの確認**

  | **フィールド** |  **表示名** | **説明** |
  | ------------------------- |-----------|----------|
  | **ID** | Org2 Admin | Org2 のアイデンティティー |

  *図 5. コンソール・ウォレットの確認*  

MSP について詳しくは、[組織の管理](/docs/services/blockchain/howto/ibp-console-organizations.html#ibp-console-organizations)を参照してください。

MSP をエクスポートして保存することは重要です。これにより、別のコンソールでホストされている共同事業体に組織を追加できるようになるからです。
{:important}

### ピアの作成
{: #ibp-console-join-network-peer-create}

[CA を作成](/docs/services/blockchain/howto/ibp-console-join-network.html#ibp-console-join-network-create-CA-org2CA)し、この CA を使用してアイデンティティーを登録し、[ピア組織 MSP](/docs/services/blockchain/howto/ibp-console-join-network.html#ibp-console-join-network-create-peers-org2) を作成したら、ピアを作成する準備ができています。

#### ピアの役割
{: #ibp-console-join-network-peer-role}

重要な留意事項として、組織自体が台帳を保守することはありません。 ピアが保守します。 また組織はピアを使用して、トランザクション提案に署名して、チャネル構成の更新を承認します。 チャネル上にピアが 2 つ以上存在すると、組織の可用性が高まります。チャネルにピアを 2 つ以上参加させることが、実動レベルの実装のベスト・プラクティスです。 このチュートリアルでは、単一のピアを作成するプロセスだけを説明します。

リソース割り振りの観点からは、同じピアを複数のチャネルに参加させることが可能です。 ピアの設計上、いずれかのチャネルのデータを、ピアを介して別のチャネルに渡すことができないようになっています。 ただし、ピアにはチャネルごとに別個の台帳が保管されるため、トランザクションとデータの負荷を処理するための十分な処理能力とストレージをピアが備えていることを確認する必要があります。

#### ピアのデプロイ
{: #ibp-console-join-network-deploy-peer-role}

コンソールを使用して以下の手順を実行します。

1. **「ノード」**ページで、**「ピアの追加」**をクリックします。
2. **「ピアの新規作成 (Create a new peer)」**の下の「{{site.data.keyword.cloud_notm}}」をクリックし、**「次へ」**をクリックします。
3. ピアの**「表示名」**として `Peer Org2` を指定します。
4. 次の画面で、CA として `Org2 CA` を選択します。 次に、ピア用に作成したピア・アイデンティティーの登録 ID および機密事項として `peer2` と `peer2pw` を入力します。 次に、ドロップダウン・リストから `Org2 MSP` という MSP を選択して、**「次へ」**をクリックします。
5. 次のサイド・パネルでは、TLS CA 情報が求められます。 CA を使用してデプロイした TLS CA の別個の管理者を作成することは可能ですが、その必要はありません。
   - **「TLS 登録 ID (TLS Enroll ID)」**として `admin` を指定して、機密事項として `adminpw` を指定します。これらは、CA の作成時に指定した登録 ID や登録機密事項と同じ値です。
   - **「TLS CSR ホスト名 (TLS CSR hostname)」**は上級ユーザー向けであり、ピア・エンドポイントのアドレスを指定するために使用できるカスタム・ドメイン名を指定する場合に使用されます。 ここでは**「TLS CSR ホスト名 (TLS CSR hostname)」**はブランクのままにします。これはこのチュートリアルでは使用しません。
6. 最後のサイド・パネルでは、**ID を関連付けて**、ピアの管理者にすることを要求されます。 ピア管理者アイデンティティーとして `Org2 Admin` を選択します。
7. 要約を確認し、**「ピアの追加」**をクリックします。

**タスク: ピアのデプロイ**

  |  | **表示名** | **MSP ID** | **登録 ID** | **機密事項** |
  | ------------------------- |-----------|-----------|-----------|-----------|
  | **ピアの作成** | Peer Org2 | org2msp |||
  | **CA** | Org2 CA ||||
  | **ピア ID** | |  | peer2 | peer2pw |
  | **管理者証明書** | org2msp ||||
  | **TLS CA** | Org2 CA ||||
  | **TLS CA ID** | || admin | adminpw |
  | **ID の関連付け (Associate identity)** | Org2 Admin |||||

  *図 6. ピアのデプロイ*  

## ステップ 2: トランザクションを実行できる組織のリストに組織を追加する
{: #ibp-console-join-network-add-org2}

前述のとおり、ピア組織がチャネルを作成したりチャネルに参加したりするには、順序付けプログラムのコンソーシアムのメンバーにならなければなりません。 技術的なレベルで言うと、チャネルは、順序付けプログラムを介してピア間をつなぐ**メッセージング・パス**であるからです。 チャネル間で情報を受け渡しすることなく、単一のピアを複数のチャネルに参加させることができるのと同様に、単一の順序付けプログラムは他のチャネル上の組織にデータを公開することなく、その順序付けプログラムを通過する複数のチャネルを持つことができます。

順序付けプログラム管理者のみがピア組織をコンソーシアムに追加できるため、順序付けプログラム管理者に**なる**か、MSP 情報を順序付けプログラム管理者に**送信**することが必要になります。 このチュートリアルでは、順序付けプログラムをホストしている場合は、**コンソール内でピアの組織を順序付けプログラムに追加**できます。 または、**組織情報をエクスポート**して、順序付けプログラムが存在するネットワークを作成した順序付けプログラム管理者にその情報を提供する必要があります。 順序付けプログラム管理者は、組織情報を提供したユーザーの組織をインポートして、そのユーザーを共同事業体に追加できます。

### コンソールでの順序付けプログラムへのピアの組織の追加
{: #ibp-console-join-network-add-org2-local}

**順序付けプログラムおよび参加先として希望するチャネルがコンソールに既に含まれている場合にのみ、以下のステップを実行してください。** そうでない場合は、[組織情報のエクスポート](/docs/services/blockchain/howto/ibp-console-join-network.html#ibp-console-join-network-add-org2-remote)に進んでください。  

ピア組織を共同事業体に追加できるのは順序付けプログラム管理者のみであるため、順序付けプログラム管理者になる必要があります。つまり、コンソール・ウォレット内に順序付けプログラム組織の管理者アイデンティティーを持っている必要があります。  

1. **「ノード」**タブにナビゲートします。
2. 使用する順序付けプログラムまでスクロールダウンして、その順序付けプログラムをクリックして開きます。
3. **「コンソーシアム・メンバー (Consortium Members)」**の下の**「組織の追加 (Add Organization)」**をクリックします。
4. ドロップダウン・リストから、`Org2 MSP` を選択します。これが、ピアの組織 `org2` を表す MSP であるからです。
5. **「組織の追加」**をクリックします。

次に、ピア組織をチャネルに追加します。
1. **「チャネル」**タブにナビゲートして、`channel1` をクリックします。
2. **「設定」**アイコンをクリックして、チャネルを更新し、ピア組織をチャネルに追加します。
3. **「使用可能な順序付けプログラムから選択 (Choose from available orderers)」**ドロップダウン・リストで、`Orderer` が選択されていることを確認します。
4. **「チャネル・アップデーター MSP ID (Channel Updater MSP ID)」**ドロップダウン・リストで、`org1MSP` が選択されていることを確認します。
5. **「ID の関連付け (Associate available identity)」**ドロップダウン・リストで、`Org1Admin` が選択されていることを確認します。
6. `「チャネルへの組織の追加 (Add organizations to the channel)」`というセクションまでスクロールダウンして、`「チャネル・メンバーの選択 (Select a channel member)」`ドロップダウン・リストを開いて、このチュートリアルで使用する `Org2 MSP` というピア組織 MSP を選択します。
7. **「追加 (Add)」**をクリックしてから、その組織の許可を割り当てます。 その組織がチャネルを更新できるようにするために、`Operator` という許可を割り当てることをお勧めします。
8. **「チャネルの更新 (Update channel)」**をクリックします。

このプロセスが完了したら、`org2` は、`Orderer` 上でホストされているチャネルを作成したり、このチャネルに参加したりできるようになります。 [ステップ 3: ピアをチャネルに参加させる](/docs/services/blockchain/howto/ibp-console-join-network.html#ibp-console-join-network-join-peer-org2)に進んでください。

### 組織情報のエクスポート
{: #ibp-console-join-network-add-org2-remote}

**順序付けプログラムおよびピアの参加先チャネルが別の {{site.data.keyword.blockchainfull_notm}} Platform サービス・インスタンスに存在している場合のみに、以下のステップを実行してください。** そうでない場合は、[ステップ 3: ピアをチャネルに参加させる](/docs/services/blockchain/howto/ibp-console-join-network.html#ibp-console-join-network-join-peer-org2)に進んでください。

以下のステップを実行し、組織 MSP 定義を順序付けプログラム管理者に送信して、共同事業体に追加してもらう必要があります。  

以下のステップを実行する際は、**ピア組織**の管理者である必要があります。つまり、ピア組織の管理者アイデンティティーをコンソール・ウォレット内に持っている必要があります。  
1. **「組織」**タブにナビゲートします。 エクスポート可能な組織が**「使用可能な組織 (Available organizations)」**に一覧表示されます。 組織タイル内の**「ダウンロード」**ボタンをクリックして、ピア組織の MSP を表す JSON 構成ファイルをダウンロードします。
2. このファイルを順序付けプログラム管理者にアウト・オブ・バンド操作で送信します。

### 組織定義のインポート
{: #ibp-console-join-network-import-remote-msp}
順序付けプログラム管理者は、この JSON ファイルをインポートして、ユーザーの組織をそのユーザーのコンソールに追加する必要があります。
1. **「組織」**タブにナビゲートして、**「MSP 定義のインポート (Import MSP definition)」**ボタンをクリックして、ピア組織 MSP 定義を表す JSON ファイルを選択します。  
2. **「ノード」**ページにナビゲートして、順序付けプログラム・ノードをクリックします。 順序付けノード・パネルの**「コンソーシアム・メンバー (Consortium Members)」**で、**「組織の追加 (Add Organization)」**をクリックします。 開いたサイド・パネルで、**「組織」**タブの MSP 定義のリストから `Org2 MSP` を選択します。
3. **「チャネル」**タブにナビゲートして、`channel1` をクリックしてから、**「設定」**アイコンをクリックして、チャネルを更新して、ピア組織をチャネルに追加します。
4. **「使用可能な順序付けプログラムから選択 (Choose from available orderers)」**ドロップダウン・リストで、`Orderer` が選択されていることを確認します。
5. **「チャネル・アップデーター MSP ID (Channel Updater MSP ID)」**ドロップダウン・リストで、`org1MSP` が選択されていることを確認します。
6. **「ID の関連付け (Associate available identity)」**ドロップダウン・リストで、`Org1Admin` が選択されていることを確認します。
7. `「チャネルへの組織の追加 (Add organizations to the channel)」`というセクションまでスクロールダウンして、`「チャネル・メンバーの選択 (Select a channel member)」`ドロップダウン・リストを開いて、このチュートリアルで使用する `Org2 MSP` というピア組織 MSP を選択します。
8. **「追加 (Add)」**をクリックしてから、その組織の許可を割り当てます。 その組織がチャネルを更新できるようにするために、`Operator` という許可を割り当てることをお勧めします。
9. **「チャネルの更新 (Update channel)」**をクリックします。

順序付けプログラムの管理者がピア組織を共同事業体とチャネルに参加させた後に、順序付けノードをコンソールにインポートする必要があります。 その後、順序付けサービスによってホストされているチャネルに参加できます。 以下のステップを実行し、順序付けプログラムを**インポート**してください。

**順序付けプログラム組織**の管理者は、以下のステップを最初に実行する必要があります。
1. **「ノード」**タブ内で順序付けプログラム・ノードにナビゲートして、ノード名の右側にある**「設定」**アイコンをクリックしてサイド・パネルを開きます。 **「アクション」**の下にある**「エクスポート」**ボタンをクリックして JSON 構成ファイルをダウンロードします。
2. このファイルをピア組織にアウト・オブ・バンド操作で送信します。 ピア組織の管理者は、この構成ファイルを使用して順序付けプログラムをコンソールに追加できます。

### 別のクラスターからの順序付けプログラムのインポート
{: #ibp-console-join-network-import-remote-orderer}

**ピア組織**の管理者である場合は、以下のステップを実行できます。
1. **「ノード」**ページにナビゲートして、**「順序付けプログラムの追加 (Add orderer)」**をクリックします。
2. **「既存の順序付けプログラムのインポート (Import an existing orderer)」**の下の「{{site.data.keyword.cloud_notm}}」をクリックします。
3. **「JSON のアップロード (Upload JSON)」**ボタンをクリックして、ノード自体を表す JSON を選択します。
4. 後続のステップで、アイデンティティーを関連付けることを求められたら、ピア組織のアイデンティティーを選択します。 このチュートリアルでは、`Org2 Admin` を選択して、**「順序付けプログラムのインポート (Import orderer)」**をクリックします。


## ステップ 3: ピアをチャネルに参加させる
{: #ibp-console-join-network-join-peer-org2}

チュートリアルの完了までもう少しです。 この時点で、ピアを既存のチャネルに参加させることができるようになりました。 チャネルを作成したネットワーク・オペレーターから `channel name` をアウト・オブ・バンドで取得する必要があります。 **ネットワーク構築**のチュートリアルで、`channel1` という名前のチャネルを作成しました。 まだこの場所にアクセスしていない場合は、左側のナビゲーションで**「チャネル」**タブにナビゲートします。

コンソールから以下の手順を実行します。

1. **「チャネルへの参加 (Join channel)」**ボタンをクリックしてサイド・パネルを立ち上げます。
2. 「Orderer」という名前の順序付けプログラムを選択して、**「次へ」**をクリックします。
3. 参加するチャネルの名前 (`channel1`) を入力して、**「次へ」**をクリックします。
4. チャネルに参加させるピアを選択します。 このチュートリアルでは、`Peer Org2` をクリックします。
5. **「ピアへの参加 (Join peer)」**をクリックします。

Hyperledger Fabric の [Private Data ![外部リンク・アイコン](../images/external_link.svg "外部リンク・アイコン")](https://hyperledger-fabric.readthedocs.io/en/latest/private-data/private-data.html "Private Data") または [Service Discovery ![外部リンク・アイコン](../images/external_link.svg "外部リンク・アイコン")](https://hyperledger-fabric.readthedocs.io/en/latest/discovery-overview.html "Service Discovery") の機能を利用する予定の場合は、組織内のアンカー・ピアを**「チャネル」**タブで構成する必要があります。 コンソールの**「チャネル」**タブを使用して[プライベート・データ用のアンカー・ピアを構成する方法](/docs/services/blockchain/howto/ibp-console-smart-contracts.html#ibp-console-smart-contracts-private-data)に関するトピックを参照してください。

組織が共同事業体のメンバーになったら、新しいチャネルを作成することもできます。 [Build a network tutorial](/docs/services/blockchain/howto/ibp-console-build-network.html#ibp-console-build-network) に記載されている[チャネルを作成](/docs/services/blockchain/howto/ibp-console-build-network.html#ibp-console-build-network-create-channel)するためのステップを実行してください。

## 次のステップ
{: #ibp-console-join-network-next-steps}

ピアをチャネルに参加させた後に、以下のステップを実行して、スマート・コントラクトをデプロイして、ブロックチェーンへのトランザクション送信を開始してください。

- コンソールを使用して[ネットワークにスマート・コントラクトをデプロイします](/docs/services/blockchain/howto/ibp-console-smart-contracts.html#ibp-console-smart-contracts)。
- スマート・コントラクトをインストールしてインスタンス化すると、[クライアント・アプリケーションを使用してトランザクションを送信](/docs/services/blockchain/howto/ibp-console-smart-contracts.html#ibp-console-smart-contracts-connect-to-SDK)できます。
- [コマーシャル・ペーパーのサンプル](/docs/services/blockchain/howto/ibp-console-create-app.html#ibp-console-app-commercial-paper)を使用して、サンプルのスマート・コントラクトをデプロイして、サンプル・アプリケーション・コードからトランザクションを送信します。
